<?phpnamespace App\Http\Controllers\admin;use App\am_companies;use App\Helpers\Message;use Illuminate\Database\QueryException;use Illuminate\Http\Request;use App\Http\Controllers\Controller;class ac_company extends Controller{    public function add(Request $request){        $company=new am_companies();        $company->name=$request->name;        $company->abbreviation=$request->abbreviation;        try{            $company->save();        }        catch(QueryException $ex){            $errorcode=$ex->errorInfo[1];            $message='';            if($errorcode==1062)                $message="Abbreviation of company already exists. Please try another";            else                $message="Another error occured";            return redirect('/companies')->with([                'type'=>'error',                'message'=>$message            ]);        }        return redirect('/companies')->with([            'type'=>'info',            'message'=>'Company has been added Successfully'        ]);    }    public function getOne($id){        return am_companies::find($id);    }    public function getAll(){        $companies=am_companies::paginate(10);        return view('admin.list.companies')->with('companies',$companies);    }    public function delete(Request $request){        am_companies::where('id',$request->id)->delete();        return redirect('/companies')->with([            'type'=>'info',            'message'=>'Company has been deleted Successfully'        ]);    }    public function edit($id){        return view('admin.edit.company')->with('company',$this->getOne($id));    }    public function update(Request $request){        $company=$this->getOne($request->id);        $company->name=$request->name;        $company->abbreviation=$request->abbreviation;        try{            $company->save();        }        catch(QueryException $ex){            $errorcode=$ex->errorInfo[1];            $message='';            if($errorcode==1062)                $message="Abbreviation of company already exists. Please try another";            return redirect('/companies')->with([                'type'=>'error',                'message'=>$message            ]);        }        return redirect('/companies')->with([            'type'=>'info',            'message'=>'Company has been updated Successfully'        ]);    }}